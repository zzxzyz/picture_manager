你是一个专业的python工程师, 你需要整理文件夹里面的所有图片和视频，请严格按照如下步骤一步步整理：
1. 不能改变源文件夹的任何东西，把源文件夹包括所有子目录下面的所有图片拷贝到目标目录的image子目录下面，注意处理文件名冲突
2. 不能改变源文件夹的任何东西，把源文件夹包括所有子目录下面的所有视频拷贝到目标目录的video子目录下面，注意处理文件名冲突
3. 对目标目录的所有文件进行去重，文件是否相同以文件的md5为准

4. 处理目标目录里面的所有图片:
  4.1 把目标目录除image目录外的的所有图片拷贝到image子目录下面
  4.2 对图片进行二次分类，先查询图片的拍摄时间并打印出来，拍摄时间的期望格式是YYYY:MM:DD HH:MM:SS, 
    同时打印YYYY:MM:DD HH:MM:SS和YYYYMMDD_HHMMSS两种时间格式，注意处理拍摄时间的各种异常情况，
    然后把有拍摄时间的放到camera目录，没有拍摄时间的放到no_camera目录，注意处理同文件名称冲突
  4.3. 处理image/camera目录，主要有重命名和分组两个操作，文件命名规则如下IMG_YYYYMMDD_HHMMSS.后缀名，分组目录命名规则如下：YYYY-MM或者YYYY
    4.3.1 重命名：先检查文件命名是否符合规范，如果符合则直接跳过，如果不符合，则读取照片的拍摄时间，用拍摄时间进行命名
    4.3.2 分组：读取文件名称中的年月日， 如果读取不到，则直接跳过，如果读取到，则根据参数控制按年或者按年月进行分组
  4.4. 处理image/no_camera目录，主要有重命名和分组两个操作，文件命名规则如下IMG_YYYYMMDD_HHMMSS.后缀名，分组目录命名规则如下：YYYY-MM或者YYYY 
    4.4.1 重命名：先检查文件命名是否符合规范，如果符合则直接跳过，如果不符合，按如下规则处理，所有规则使用正则表达式匹配，主要用于提取名称中的时间信息
    如果不符合则直接跳过
      规则1： 提取YYYYMMDD_IMG_HHMM.后缀名，里面的YYYYMMDD和HHMM，缺少的SS用00替代
      规则2： 提取MTXX_YYYYMMDD_HHMMSS.后缀名，里面的YYYYMMDD和HHMMSS
      规则3： 提取ptYYYY_MM_DD_HH_MM_SS.后缀名, 里面的YYYY, MM, DD, HH, MM, SS
      规则4:  提取beauty_YYYMMDDHHMMSS*.后缀名, 里面的beauty_YYYMMDDHHMMSS
    44.2 分组：读取文件名称中的年月日， 如果读取不到，则直接跳过，如果读取到，则根据参数控制按年或者按年月进行分组

5 处理目标目录里面的所有视频
  5.1 把目标目录除video目录外的的所有图片拷贝到video子目录下面
  5.2 对视频进行二次分类，先查询视频的拍摄时间并打印出来，拍摄时间的期望格式是YYYY:MM:DD HH:MM:SS, 
    同时打印YYYY:MM:DD HH:MM:SS和YYYYMMDD_HHMMSS两种时间格式，注意处理拍摄时间的各种异常情况，
    然后把有拍摄时间的放到camera目录，没有拍摄时间的放到no_camera目录，注意处理同文件名称冲突
  5.3 处理video/camera目录，主要有重命名和分组两个操作，文件命名规则如下IMG_YYYYMMDD_HHMMSS.后缀名，分组目录命名规则如下：YYYY-MM或者YYYY
    5.3.1 重命名：先检查文件命名是否符合规范，如果符合则直接跳过，如果不符合，则读取视频的拍摄时间，用拍摄时间进行命名
    5.3.2 分组：读取文件名称中的年月日， 如果读取不到，则直接跳过，如果读取到，则根据参数控制按年或者按年月进行分组
  5.4 处理video/no_camera目录，主要有重命名和分组两个操作，文件命名规则如下IMG_YYYYMMDD_HHMMSS.后缀名，分组目录命名规则如下：YYYY-MM或者YYYY 
    5.4.1 分组：读取文件名称中的年月日， 如果读取不到，则直接跳过，如果读取到，则根据参数控制按年或者按年月进行分组


实现要求：
1. 生梳理好实现流程，然后定义好每个文件，类，函数的作用，然后再开始详细的实现代码
2. 每个函数的操作日志都要写文件
3. 程序通过命令行参数进行输入
4. 路径操作要考虑跨平台的通用性
5. 工程结构组织良好，每个文件，类，函数功能单一，
6. 对每个函数生成单元测试

===========================
初始准备阶段：

递归扫描源文件夹及所有子目录

并行复制图片到/image目录和视频到/video目录

计算所有文件的MD5值并删除重复文件

图片处理流程：

时间分类：

提取图片拍摄时间（EXIF元数据）

打印标准格式和文件命名格式

分类到camera/no_camera目录

camera目录处理：

命名规范检查

用拍摄时间重命名不符合规范的文件

按年/年月分组

no_camera目录处理：

应用4种正则规则提取时间信息

重命名后按年/年月分组

视频处理流程：

时间分类：

提取视频拍摄时间（元数据）

打印两种时间格式

分类到camera/no_camera目录

camera目录处理：

命名规范检查

用拍摄时间重命名

按年/年月分组

no_camera目录处理：

仅分组操作（无重命名）

按年/年月分组

关键特性：

完整的异常处理机制

文件名冲突解决方案

4种正则规则可视化

统一的分组策略（YYYY 或 YYYY-MM）

保持源文件夹不变的只读操作

这个流程图完整呈现了所有技术细节，包括时间格式处理、正则规则、冲突解决方案和目录结构，同时通过模块化设计提高了可读性和可维护性。
